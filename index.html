<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Family Tree - FamilyTree.js</title>
  <script src="https://balkan.app/js/FamilyTree.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body { height: 100%; width: 100%; margin: 0; padding: 0; box-sizing: border-box; }
    body { min-height: 100vh; min-width: 100vw; display: flex; flex-direction: column; align-items: stretch; background: #fff; }
    h1 { text-align: center; font-size: 2rem; margin: 1rem 0 0.5rem 0; }
    #tree { flex: 1 1 0; width: 100vw; height: 80vh; min-height: 400px; min-width: 100px; }
    @media (max-width: 600px) {
      h1 { font-size: 1.2rem; margin: 0.6rem 0 0.3rem 0; }
      #tree { height: 80vh; min-height: 200px; }
    }
    .bft-control-bar { max-width: 100vw !important; }
  </style>
</head>
<body>
  <h1>Family Tree (FamilyTree.js)</h1>
  <div id="tree"></div>
  <script>
    fetch('https://script.google.com/macros/s/AKfycbyZZl2h8OBb2buS5Qv-3oumCNtC4e9xGHGRa0A6jGJ3Dq6BU8U5QblYnK7nRBz-_WNhVQ/exec')
      .then(res => res.json())
      .then(data => {
        const nodes = data.map(d => ({
          id: d.id,
          name: d.namalengkap,
          gender: d.kelamin === "L" ? "male" : "female",
          pids: d.pid ? [d.pid] : [],
          fid: d.ida || undefined,
          mid: d.idi || undefined,
          domisili: d.domisili,
          tahunlahir: d.tahunlahir,
          tahunmeninggal: d.tahunmeninggal,
          panggilan: d.panggilan
        }));

        new FamilyTree(document.getElementById("tree"), {
          nodes,
          nodeBinding: {
            field_0: "name",
            // bisa tambah field_1: "domisili", dst, jika ingin tampilkan info lain di node
          },
          scaleInitial: window.innerWidth < 600 ? FamilyTree.match.boundary : 1,
          min: window.innerWidth < 600 ? 0.1 : 0.5,
          max: 2
        });
      });
  </script>
</body>
</html>
